commit 6f290e4861f37601bd85e64b33e25e5f28435ac4
Author: Mauro Carvalho Chehab <mchehab@redhat.com>
Date:   Thu Sep 9 11:01:02 2010 -0300

    Patch5: only_return_defined_error_codes.patch

diff --git a/src/etc/edac.init b/src/etc/edac.init
index 624f7d5..c7a5090 100644
--- a/src/etc/edac.init
+++ b/src/etc/edac.init
@@ -26,6 +26,7 @@ service_start ()
   #
   [ -e /sys/devices/system/edac/mc/mc0/ ] || exit 0
 
+  [ `id -u` = 0 ] || exit 4
   [ -x $EDAC ] || exit 5
   echo -n "Loading EDAC memory labels: "
 
@@ -35,10 +36,12 @@ service_start ()
   rc=$?
   if [ $rc -eq 0 ]; then
    daemon true
+   echo
   else
    daemon false
+   echo
+   exit 1
   fi
-  echo
 }
 
 usage ()
@@ -48,7 +51,6 @@ usage ()
 
 ###############################################################################
 
-rc=0
 case "$1" in
   start|restart|reload|condrestart|try-restart|force-reload)
     service_start
@@ -62,4 +64,4 @@ case "$1" in
     usage
     exit 2
 esac
-exit $rc
+exit 0
